{"version":3,"sources":["../js-src/sam.pro.place.editor.js"],"names":[],"mappings":"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","file":"sam.pro.place.editor.min.js","sourcesContent":["/**\r\n * Created by minimus on 26.02.2015.\r\n */\r\nlet sam = /*sam ||*/ {};\r\n(function($) {\r\n  let media;\r\n  const mediaTexts = options.media;\r\n  const itemID = parseInt(options.item, 10);\r\n  const ejLocale = (options.locale.changeLocale) ? options.locale.locale : 'en-US';\r\n  const localeStrings = options.strings;\r\n\r\n  sam.media = media = {};\r\n  sam.media = media = {\r\n    buttonId: '#banner-media',\r\n    adUrl: '#img',\r\n    adImgId: '#img_id',\r\n    adName: '#title',\r\n    adDesc: '#description',\r\n    adAlt: '#alt',\r\n\r\n    init: function () {\r\n      $(this.buttonId).on('click', this.openMediaDialog);\r\n    },\r\n\r\n    openMediaDialog: function (e) {\r\n      e.preventDefault();\r\n\r\n      if (this._frame) {\r\n        this._frame.open();\r\n        return;\r\n      }\r\n\r\n      this._frame = media.frame = wp.media({\r\n        title: mediaTexts.title,\r\n        button: {\r\n          text: mediaTexts.button\r\n        },\r\n        multiple: false,\r\n        library: {\r\n          type: 'image'\r\n        }\r\n      });\r\n\r\n      this._frame.state('library').on('select', function () {\r\n        const attachment = this.get('selection').single();\r\n        media.handleMediaAttachment(attachment);\r\n      });\r\n\r\n      this._frame.open();\r\n    },\r\n\r\n    handleMediaAttachment: function (a) {\r\n      const attachment = a.toJSON();\r\n      $(this.adUrl).val(attachment.url);\r\n      $(this.adImgId).val(attachment.id);\r\n      if ('' === $(this.adName).val() && '' !== attachment.title) $(this.adName).val(attachment.title);\r\n      if ('' === $(this.adDesc).val() && '' !== attachment.caption) $(this.adDesc).val(attachment.caption);\r\n      if ('' === $(this.adAlt).val() && '' !== attachment.alt) $(this.adAlt).val(attachment.alt);\r\n    }\r\n  };\r\n  $(document).ready(function() {\r\n    $('#tabs').ejTab({enablePersistence: true});\r\n    media.init();\r\n\r\n    const rcami = $('#rc-ami');\r\n    const rcamc = $('#rc-amc');\r\n    const rcamd = $('#rc-amd');\r\n\r\n    $(\"input:radio[name=amode]\").on('click', function() {\r\n      const cval = parseInt($('input:radio[name=amode]:checked').val(), 10);\r\n      if(cval === 0) {\r\n        if(rcami.is(':hidden')) rcami.show('blind', {direction:'vertical'}, 500);\r\n        if(rcamc.is(':visible')) rcamc.hide('blind', {direction:'vertical'}, 500);\r\n        if(rcamd.is(':visible')) rcamd.hide('blind', {direction:'vertical'}, 500);\r\n      }\r\n      else if(cval === 1) {\r\n        if(rcamc.is(':hidden')) rcamc.show('blind', {direction:'vertical'}, 500);\r\n        if(rcami.is(':visible')) rcami.hide('blind', {direction:'vertical'}, 500);\r\n        if(rcamd.is(':visible')) rcamd.hide('blind', {direction:'vertical'}, 500);\r\n      }\r\n      else if(cval === 2) {\r\n        if(rcamd.is(':hidden')) rcamd.show('blind', {direction:'vertical'}, 500);\r\n        if(rcamc.is(':visible')) rcamc.hide('blind', {direction:'vertical'}, 500);\r\n        if(rcami.is(':visible')) rcami.hide('blind', {direction:'vertical'}, 500);\r\n      }\r\n    });\r\n\r\n    const rcSale = $('#rc-sale');\r\n    const sale = $('#sale');\r\n    const rcSaleMode = $('#rc-sale-mode');\r\n\r\n    sale.on('click', function() {\r\n      if(sale.is(':checked')) rcSale.show('blind', {direction:'vertical'}, 500);\r\n      else rcSale.hide('blind', {direction:'vertical'}, 500);\r\n    });\r\n\r\n    $(\"input:radio[name=sale_mode]\").on('click', function() {\r\n      const cval = parseInt($('input:radio[name=sale_mode]:checked').val(), 10);\r\n      if(cval === 0) {\r\n        if(rcSaleMode.is(':hidden')) rcSaleMode.show('blind', {direction:'vertical'}, 500);\r\n      }\r\n      else {\r\n        if(rcSaleMode.is(':visible')) rcSaleMode.hide('blind', {direction:'vertical'}, 500);\r\n      }\r\n    });\r\n\r\n    const cBefore = $('#code_before');\r\n    const cAfter = $('#code_after');\r\n    const adWidth = $('#width').val() + 'px';\r\n\r\n    $('#sam-pro-center').on('click', function(e) {\r\n      e.preventDefault();\r\n      cBefore.val(\"<div style='display:flex; flex-direction:row; justify-content:center;'>\");\r\n      cAfter.val(\"</div>\");\r\n    });\r\n    $('#sam-pro-left').on('click', function(e) {\r\n      e.preventDefault();\r\n      cBefore.val(\"<div style='float: left; width: \" + adWidth + \";'>\");\r\n      cAfter.val(\"</div>\");\r\n    });\r\n    $('#sam-pro-right').on('click', function(e) {\r\n      e.preventDefault();\r\n      cBefore.val(\"<div style='float: right; width: \" + adWidth + \";'>\");\r\n      cAfter.val(\"</div>\");\r\n    });\r\n\r\n    const sdate = $('#sdate');\r\n    const fdate = $('#fdate');\r\n    const startDate = $('#startDate').ejDateTimePicker({\r\n      width: 250,\r\n      locale: ejLocale,\r\n      buttonText: options.buttonText,\r\n      dateTimeFormat: 'yyyy-MM-dd HH:mm:ss',\r\n      timeDisplayFormat: 'HH:mm:ss',\r\n      value: sdate.val(),\r\n      change: function (args) {\r\n        sdate.val(args.value);\r\n      }\r\n    }).data('ejDateTimePicker');\r\n    const finishDate = $('#finishDate').ejDateTimePicker({\r\n      width: 250,\r\n      locale: ejLocale,\r\n      buttonText: options.buttonText,\r\n      dateTimeFormat: 'yyyy-MM-dd HH:mm:ss',\r\n      timeDisplayFormat: 'HH:mm:ss',\r\n      value: fdate.val(),\r\n      change: function (args) {\r\n        fdate.val(args.value);\r\n      }\r\n    }).data('ejDateTimePicker');\r\n\r\n    if(itemID > 0) {\r\n      let dmAds;\r\n      let listGrid;\r\n      const adsDialog = $('#adsDialog').ejDialog({\r\n        width: 830,\r\n        allowDraggable: true,\r\n        enableModal: true,\r\n        showOnInit: false\r\n      }).data('ejDialog');\r\n      const adsSel = new Selectors();\r\n\r\n      const dm = ej.DataManager({\r\n        url: `${ajaxurl}?action=load_places_ads_item&pid=${itemID}&sam_pro_nonce=${options.samProNonce}`,\r\n        removeUrl: `${ajaxurl}?action=unlink_ad_item&pid=${itemID}&sam_pro_nonce=${options.samProNonce}`,\r\n        updateUrl: `${ajaxurl}?action=update_place_ad&sam_pro_nonce=${options.samProNonce}`,\r\n        requestType: 'json',\r\n        adaptor: new ej.UrlAdaptor()\r\n      });\r\n      const grid = $('#grid').ejGrid({\r\n        dataSource: dm,\r\n        locale: ejLocale,\r\n        allowSorting: true,\r\n        allowPaging: true,\r\n        pageSettings: {pageSize: options.itemsPerPage},\r\n        allowSelection: true,\r\n        selectionSettings: {selectionMode: [ej.Grid.SelectionMode.Row], enableToggle: true},\r\n        editSettings: {allowEditing: true, allowDeleting: true, showDeleteConfirmDialog: true},\r\n        toolbarSettings: {\r\n          showToolbar: true,\r\n          toolbarItems: [\r\n            \"edit\",\r\n            ej.Grid.ToolBarItems.Update,\r\n            ej.Grid.ToolBarItems.Cancel,\r\n            ej.Grid.ToolBarItems.Delete\r\n          ],\r\n          customToolbarItems: [\"Link\", \"Edit_Ad\", \"Refresh\"]\r\n        },\r\n        columns: [\r\n          {field: 'pid', headerText: 'Place ID', visible: false},\r\n          {\r\n            field: 'aid',\r\n            headerText: localeStrings.adId,\r\n            isPrimaryKey: true,\r\n            allowEditing: false,\r\n            textAlign: ej.TextAlign.Right,\r\n            width: 90\r\n          },\r\n          {field: 'title', headerText: localeStrings.name, allowEditing: false, width: 180},\r\n          {field: 'description', headerText: localeStrings.desc, allowEditing: false},\r\n          {\r\n            field: 'weight',\r\n            headerText: localeStrings.weight,\r\n            textAlign: ej.TextAlign.Right,\r\n            allowEditing: true,\r\n            editType: ej.Grid.EditingType.Numeric,\r\n            defaultValue: 10,\r\n            validationRules: {range: [0, 10]},\r\n            width: 100\r\n          },\r\n          {\r\n            field: 'trash',\r\n            headerText: localeStrings.status,\r\n            allowEditing: false,\r\n            textAlign: ej.TextAlign.Center,\r\n            width: 100\r\n          }\r\n        ],\r\n        create: function (args) {\r\n          $('.Link').parent('li').attr('title', localeStrings.linkAds);\r\n          $('#grid_delete').attr('title', localeStrings.unlinkAd);\r\n          $('.Refresh').parent('li').attr('title', localeStrings.refresh);\r\n          $('.Edit_Ad').parent('li').attr('title', localeStrings.editAd);\r\n        },\r\n        toolbarClick: function (args) {\r\n          const tbarObj = $(args.target);\r\n          const rec = this.getSelectedRecords();\r\n          if (tbarObj.hasClass(\"Refresh\")) this.refreshContent();\r\n          else if (tbarObj.hasClass('Link')) getList();\r\n          else if (tbarObj.hasClass('Edit_Ad')) {\r\n            if (rec.length > 0) {\r\n              const item = rec[0].aid;\r\n              document.location = options.adEditorUrl + item;\r\n            }\r\n          }\r\n        },\r\n        actionComplete: function (args) {\r\n          const $tb = $('#grid_toolbarItems');\r\n          let li;\r\n          li = $('#grid_delete');\r\n          $tb.ejToolbar('disableItem', li);\r\n          li = $('#grid_Edit_Ad');\r\n          $tb.ejToolbar('disableItem', li);\r\n        },\r\n        recordClick: function (args) {\r\n          const $tb = $('#grid_toolbarItems');\r\n          let li;\r\n          const recs = this.getSelectedRecords();\r\n          const action = (recs.length === 0) ? 'disableItem' : 'enableItem';\r\n          li = $('#grid_delete');\r\n          $tb.ejToolbar(action, li);\r\n          li = $('#grid_Edit_Ad');\r\n          $tb.ejToolbar(action, li);\r\n        }\r\n      }).data('ejGrid');\r\n\r\n      function getList() {\r\n        dmAds = ej.DataManager({\r\n          url: `${ajaxurl}?action=list_ads&pid=${itemID}&sam_pro_nonce=${options.samProNonce}`,\r\n          requestType: 'json',\r\n          adaptor: new ej.UrlAdaptor()\r\n        });\r\n        listGrid = $('#adsGrid').ejGrid({\r\n          dataSource: dmAds,\r\n          locale: ejLocale,\r\n          allowTextWrap: true,\r\n          allowPaging: true,\r\n          pageSettings: {pageSize: options.itemsPerPage},\r\n          allowSorting: true,\r\n          allowSelection: true,\r\n          selectionType: ej.Grid.SelectionType.Multiple,\r\n          selectionSettings: {selectionMode: [ej.Grid.SelectionMode.Row], enableToggle: true},\r\n          columns: [\r\n            {field: 'aid', headerText: localeStrings.adId, isPrimaryKey: true, textAlign: ej.TextAlign.Right, width: 120},\r\n            {field: 'title', headerText: localeStrings.name, width: 280},\r\n            {field: 'description', headerText: localeStrings.desc, width: 400}\r\n          ],\r\n          rowSelected: function(args) {\r\n            if(!adsSel.service) {\r\n              adsSel.page = args.model.pageSettings.currentPage;\r\n              const d = adsSel.pids[adsSel.page].slice(0);\r\n              const cr = d.indexOf(args.data.aid);\r\n              if(cr > -1) adsSel.removePid(args.data.aid);\r\n              else adsSel.pids = args.data.aid;\r\n            }\r\n          },\r\n          actionComplete: function(args) {\r\n            const d = adsSel.ids.slice(0);\r\n            adsSel.service = true;\r\n            if(d.length !== 0) {\r\n              for(let i = 0; i < this.model.currentViewData.length; i++) {\r\n                for(let j = 0; j < d.length; j++) {\r\n                  if(d[j] === this.model.currentViewData[i].aid) {\r\n                    this.multiSelectCtrlRequest = true;\r\n                    this.selectRows(i);\r\n                    if(args.requestType === 'paging') {\r\n                      adsSel.page = args.currentPage;\r\n                      adsSel.pids = this.model.currentViewData[i].aid;\r\n                    }\r\n                    else if(args.requestType === 'refresh') {\r\n                      adsSel.page = 1;\r\n                      adsSel.pids = this.model.currentViewData[i].aid;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            adsSel.service = false;\r\n          }\r\n        }).data('ejGrid');\r\n\r\n        adsSel.sid = '';\r\n        adsDialog.open();\r\n      }\r\n\r\n      $('#cancel-ads').on('click', () => {\r\n        adsDialog.close();\r\n        listGrid.destroy();\r\n      });\r\n\r\n      $('#select-ads').on('click', () => {\r\n        const sid = adsSel.sid;\r\n\r\n        if(sid !== '') {\r\n          $.post(ajaxurl + '?action=link_ads', {\r\n            pid: itemID,\r\n            sid: sid,\r\n            sam_pro_nonce: options.samProNonce\r\n          }).done((data) => (grid.refreshContent()));\r\n        }\r\n        adsDialog.close();\r\n        listGrid.destroy();\r\n      });\r\n    }\r\n  });\r\n})(jQuery);\r\n"]}